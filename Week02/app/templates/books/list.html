{% extends "base.html" %}

{% block content %}
<div class='d-flex justify-content-between align-items-center mb-3'>
  <h3>Danh sách Sách</h3>
  <a class='btn btn-primary' href='{{ url_for("books.new_book") }}'>+ Thêm sách</a>
</div>
<form class='mb-3'>
  <div class='input-group'>
    <input name='q' value='{{ q }}' class='form-control' placeholder='Tìm theo tên/ tác giả'>
    <button class='btn btn-outline-secondary' type='submit'>Tìm</button>
  </div>
</form>
<table class='table table-striped table-bordered'>
  <thead><tr><th>ID</th><th>Tiêu đề</th><th>Tác giả</th><th>Năm</th><th>Còn/Tổng</th><th></th></tr></thead>
  <tbody>
    {% for book in books %}
    <tr>
      <td>{{ book.id }}</td>
      <td>{{ book.title }}</td>
      <td>{{ book.author }}</td>
      <td>{{ book.year or '' }}</td>
      <td>{{ book.available_copies }}/{{ book.total_copies }}</td>
      <td>
        <a class='btn btn-sm btn-outline-primary' href='{{ url_for("books.edit_book", book_id=book.id) }}'>Sửa</a>
        <a class='btn btn-sm btn-outline-danger' href='{{ url_for("books.delete_book", book_id=book.id) }}' onclick="return confirm('Xóa sách?');">Xóa</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}